---
title: "교착상태란?"
date: "2020-09-08T13:22:55.527Z"
category: "cs"
emoji: "🖥️"
---

## 교착상태란 (Dead Lock)?

### 1. 교착상태의 정의

- **두 개 이상의 프로세스가 더 이상 진행을 할 수 없는 상태**이다. 
- 모든 프로세스가 서로 연결되어 다른 프로세스의 진행을 기다리면서 대기하고 있을 때 발생한다.

#### 1-1. 예시

![교착상태](https://raw.githubusercontent.com/zhsks528/TIL/master/Resource/%EA%B5%90%EC%B0%A9%EC%83%81%ED%83%9C.jpg)

위 그림과 같이 자동차(프로세스)들이 현재 위치한 길(자원)을 점유함과 동시에 다른 차가 사용하는 길을 사용하려고 대기하고 있지만 다른 길을 사용할 수 없으며 현재 길에서도 벗어나지 못하는 상태이다.

### 2. 교착상태가 발생할 수 있는 조건

- 교착상태가 발생하기 위해서는 다음의 네가지 조건이 충족되어야 한다.
- 이 네가지 조건중 하나라도 충족되지 않으면 교착상태가 발생하지 않는다.

| 조건          | 정의                                                         |
| ------------- | ------------------------------------------------------------ |
| **상호 배제** | 자원은 한 번에 한 프로세스만이 사용할 수 있어야 한다.        |
| **점유 대기** | 최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용하고 있는 자원을<br />추가로 점유하기 위해 대기하는 프로세스가 있어야 한다. |
| **비선점**    | 다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없어야 한다. |
| **순환 대기** | 공유자원과 공유자원을 사용하기 위해 대기하는 프로세스들이 원형으로 구성되어 있어<br />자신에게 할당된 자원을 점유하면서 앞이나 뒤에 있는 프로세스의 자원을 요구해야 한다. |

### 3. 교착상태 예방기법

- 교착상태가 발생하지 않도록 사전에 시스템을 제어하는 방법으로 교착상태 발생의 네가지 조건 중에서 어느 하나를 제거함으로 써 수행된다.
- **자원 낭비가 심한 기법**이다.
  - **상호 배제 부정** 
    - **한번에 여러 개의 프로세스가 공유 자원을 사용**할 수 있도록한다.
  - **점유 및 대기 부정**
    - **프로세스가 실행되기 전 필요한 모든 자원을 할당하여 프로세스 대기를 없애거나 자원이 점유되지 않은 상태에서만 자원을 요구**하도록 한다.
  - **비선점 부정**
    - **자원을 점유하고 있는 프로세스가 다른 자원을 요구할 때 점유하고 있는 자원을 반납하고, 요구한 자원을 사용하기 위해 기다리게 한다.**
  - **환형 대기 부정**
    - **자원을 선형 순서로 고유 번호를 할당**하고, 각 프로세스는 현재 점유한 자원의 고유 번호보다 앞이나 뒤 어느 한쪽 방향으로만 자원을 요구하도록 하는 것이다.

### 4. 교착상태 회피기법

- 교착상태가 발생할 가능성을 배제하지 않고 교착상태가 발생하면 적절히 피해나가는 방법 
- **자원 할당 그래프 알고리즘**과 **은행원 알고리즘**이 있다.
  - [자원 할당 그래프 정보](https://developerhenrycho.tistory.com/20)
  - [은행원 알고리즘 정보](https://jhnyang.tistory.com/102)
- 주로 **은행원 알고리즘(Banker's Algorithm)**이 사용된다.

### 5. 교착상태 발견기법

- 시스템에 교착상태가 발생했는지 점검하여 교착상태에 있**는 프로세스와 자원을 발견하는것을 의미한다.**
- **자원할당 그래프 알고리즘과 은행원 알고리즘으로 발견할 수 있다.**

### 6. 교착상태 회복기법

**교착 상태를 일으킨 프로세스를 종료하거나, 할당된 자원을 해제함으로써 회복하는 것을 의미**한다.

#### 6-1. 프로세스를 종료하는 방법

1. 교착 상태의 프로세스를 모두 중지한다.
2. 교착 상태가 제거될 때까지 한 프로세스씩 중지한다.

#### 6-2. 자원을 선점하는 방법

1. 교착 상태의 프로세스가 점유하고 있는 자원을 선점하여 다른 프로세스에게 할당하며, 해당 프로세스를 일시 정지 시키는 방법
2. 우선순위가 낮은 프로세스, 수행된 횟수가 적은 프로세스 등을 위주로 프로세스의 자원을 선점한다.

### 7. 참고자료

- https://ko.wikipedia.org/wiki/%EA%B5%90%EC%B0%A9_%EC%83%81%ED%83%9C
- https://includestdio.tistory.com/12
- https://coding-factory.tistory.com/311
- https://developerhenrycho.tistory.com/20