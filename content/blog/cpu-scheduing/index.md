---
title: "CPU Scheduing"
date: "2020-09-08T12:43:22.112Z"
category: "cs"
emoji: "🖥️"
---

## CPU Scheduing

### 1. 스케줄링 정의

- **스케줄링은 프로세스가 생성되어 실행될 때 필요한 시스템의 여러 자원을 해당 프로세스에게 할당하는 작업을 의미**한다.

### 2. 스케줄링 종류

| 스케줄링      | 특징                                                         |
| ------------- | ------------------------------------------------------------ |
| 장기 스케줄링 | **어떤 프로세스가 시스템의 자원을 차지할 수 있도록 할 것인가를 결정하여 준비상태 큐로 보내는 작업을 의미**한다.<br />작업 스케줄링, **상위 스케줄링**이라고도 하며, 작업 스케줄러에 의해 수행된다. |
| 중기 스케줄링 | 어떤 프로세스들이 CPU를 할당 받을 것인지 결정하는 작업을 의미한다.<br />CPU를 할당받으려는 프로세스가 을 경우 프로세스를 일시 보류시킨 후 활성화해서 일시적으로 부하를 조절한다. |
| 단기 스케줄링 | **프로세스가 실행되기 위해 CPU를 할당받는 시기와 특정 프로세스를 지정하는 작업을 의미**한다.<br />프로세서 스케줄링, 하위 스케줄링이라고도 한다.<br />**프로세서 스케줄링 및 문맥 교환은 프로세서 스케줄러에 의해 수행**된다. |

### 3. 스케줄링 목적

| 목적                  | 특징                                                         |
| --------------------- | ------------------------------------------------------------ |
| 공정성                | 모든 프로세스에 공정하게 할당                                |
| 처리율 증가           | 단위 시간당 프로세스를 처리하는 비율(양)을 증가              |
| CPU 이용률 증가       | CPU의 낭비 시간을 줄이고, CPU가 프로세스를 실행하는 데 사용되는 시간 비율을 증가시킨다. |
| 우선순위 제도         | 우선순위가 높은 프로세스를 먼저 실행한다.                    |
| 오버헤드 최소화       | 오버헤드를 최소화한다.                                       |
| 응답시간 최소화       | 작업을 지시하고, 반응하기 시작하는 시간을 최소화한다.        |
| 반환시간 최소화       | 프로세스를 제출한 시간부터 실행이 완료될 때까지 걸리는 시간을 최소화한다. |
| 대기시간 최소화       | 프로세스가 준비상태 큐에서 대기하는 시간을 최소화한다.       |
| 균형 있는 자원의 사용 | 메모리, 입출력장치등의 자원을 균형있게 사용한다.             |
| 무한 연기 회피        | 자원을 사용하기 위해 무한정 연기되는 상태를 회피한다.        |

### 4. 프로세스 상태

![프로세스 상태전이](https://raw.githubusercontent.com/zhsks528/TIL/master/Resource/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%20%EC%83%81%ED%83%9C%EC%A0%84%EC%9D%B4.PNG)

- 비선점 스케줄링 : `Interrupt`, `Scheduler Dispatch`
- 선점 스케줄링 : `I/O or Event Wait`

------

#### 4-1. 프로세스 상태전이

**✓ 승인 (Admitted)** : 프로세스 생성이 가능하여 승인됨.

**✓ 스케줄러 디스패치 (Scheduler Dispatch)** : 준비 상태에 있는 프로세스 중 하나를 선택하여 실행시키는 것.

**✓ 인터럽트 (Interrupt)** : 예외, 입출력, 이벤트 등이 발생하여 현재 실행 중인 프로세스를 준비상태로 바꾸고, 해당 작업을 먼저 처리하는 것.

**✓ 입출력 또는 이벤트 대기 (I/O or Event Wait)** : 실행 중인 프로세스가 입출력이나 이벤트를 처리해야 하는 경우, 입출력/이벤트가 모두 끝날 때까지 대기 상태로 만드는 것.

**✓ 입출력 또는 이벤트 완료 (I/O or Event Completion)** : 입출력/이벤트가 끝난 프로세스를 준비 상태로 전환하여 스케줄러에 의해 선택될 수 있도록 만드는 것.

### 5. 스케줄링 기법

#### 5-1. 비선점 스케줄링

- **프로세스 종료 or I/O 등의 이벤트가 있을 때까지 실행 보장** (처리시간 예측 어려움)
- 프로세스 응답 시간의 예측이 용이하다.
- **일괄 처리방식에 적합**하다.
- **FCFS, SJF, 우선순위, HRN, 기한부** 등의 알고리즘이 해당한다.

#### 5-2. 선점 스케줄링

- **OS가 CPU의 사용권을 선점할 수 있는경우, 강제 회수하는 경우**
- **우선순위가 높은 프로세스를 빠르게 처리**할 수 있다.
- 주로 빠른 응답 시간을 요구하는 **대화식 시분할 시스템에 사용**된다.
- 많은 오버헤드를 초래한다.
- 선점이 가능하도록 일정 시간 배당에 대한 인터럽트용 타이머 클록(Clock)이 필요하다.
- **Round Robin, SRT, 선점 우선순위, 다단계 큐, 다단계 피드백 큐** 등의 알고리즘이 해당한다.

### 6. CPU 스케줄링 알고리즘별 분류

#### 6-1. 비선점 스케줄링 (Nonpreemptive)

- **FCFS (First Come First Served)**
  - **큐에 도착한 순서대로 CPU 할당**한다.
  - 실행 시간이 짧은 게 뒤로 가면 평균 대기 시간이 길어진다.
- **SJF (Shortest Job First)**
  - 수행시간이 가장 짧다고 판단되는 작업을 먼저 수행한다.
  - FCFS 보다 평균 대기 시간 감소, 짧은 작업에 유리하다.
- **HRN (Highest Response ration next)**
  - **긴 작업과 짧은 작업 간의 지나친 불평등을 어느 정도 보완한 기법이다.**
  - 짧은 작업이나 대기시간이 긴 작업은 우선순위가 높아진다.

#### 6-2. 선점 스케줄링 (Preemptive)

- **우선순위 (Priority Scheduling)**
  - **정적/동적으로 우선순위를 부여하여 우선순위가 높은 순서대로 처리**
  - 우선 순위가 낮은 프로세스가 무한정 기다리는 **Starvation** 이 생길 수 있음
  - Aging 방법으로 Starvation 문제 해결 가능

- **라운드 로빈 (Round Robin)**
  - FCFS에 의해 프로세스들이 보내지면 각 프로세스는 동일한 시간의 만큼 CPU를 할당 받음
    - `Time Quantum` or `Time Slice` : 실행의 최소 단위 시간
  - 할당 시간(`Time Quantum`)이 크면 FCFS와 같게 되고, 작으면 문**맥 교환 (Context Switching) 잦아져서 오버헤드 증가**
  - **시분할 방식에 효과적**이다.
- **SRT (short remaining time)**
  - **가장 짧은 시간이 소요된다고 판단되는 프로세스를 먼저 수행**한다.
  - **남은 처리 시간이 더 짧다고 판단되는 프로세스가 준비 큐에 생기면 언제라도 실행중인 프로세스가 선점**됨다. 

- **다단계 큐 (Multilevel Queue)**
  - 작업들을 여러 종류의 그룹으로 나누어 여러 개의 큐를 이용하는 기법
- **다단계 피드백 큐 (Multilevel Feedback Queue)**
  - 입출력 위주와 CPU 위주인 프로세스의 특성에 따라 서로 다른 CPU의 타임 슬라이스를 부여
  - 짧은 작업에 유리, 입출력 위주의 작업에 우선권을 줌

### 7. 참고 자료

- https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operation%20System/CPU%20Scheduling.md
- https://bnzn2426.tistory.com/65
- https://preamtree.tistory.com/19
- https://rebas.kr/852
- https://m.blog.naver.com/PostView.nhn?blogId=so_fragrant&logNo=80056608452&proxyReferer=https:%2F%2Fwww.google.com%2F

